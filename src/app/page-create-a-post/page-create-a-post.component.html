<main class="create-post-page">

  <form class="form" #myForm="ngForm">
    <div class="wrapper">

      <label class="image-upload-container btn btn-bwm">
        <span class="button-add-cover">Add Cover</span>
        <input #imageInput
               type="file"
               accept="image/*"
               class="input-image"
               name="image" ngModel
               (change)="processFile(imageInput)">
      </label>

      <div *ngIf="selectedFile" class="img-preview-container">
        <div class="img-preview"
             [ngStyle]="{'background-image': 'url('+ selectedFile.src + ')'}">
        </div>
        <div *ngIf="selectedFile.pending" class="img-loading-overlay"></div>
      </div>

      <h2>Enter the title of your article</h2>
      <input type="text" name="title" #title="ngModel" required minlength="5" maxlength="200"  placeholder="Enter Title" class="input-enter-title" ngModel/>

      <div *ngIf="title.invalid && (title.dirty || title.touched)"
           class="alert">

        <div *ngIf="title.errors?.required">
          The "Title" field is required.
        </div>
        <div *ngIf="title.errors?.minlength">
          Title must be at least 5 characters long.
        </div>
        <div *ngIf="title.errors?.maxlength">
          Title must be max 200 characters long.
        </div>
        <!--<div *ngIf="title.errors?.pattern">
          The symbol "@" is forbidden
        </div>-->

      </div>

      <div *ngFor="let item of items, let i = index">
        <h2>Enter the subtitle of your article</h2>
        <input type="text" placeholder="Enter Subtitle" class="input-enter-subtitle" name="subtitle{{i}}" ngModel>
        <h2>Tell your story...</h2>
        <textarea name="text{{i}}" ngModel></textarea>
      </div>

      <button (click)="addNewBlock($event)" class="button-add-new-block">Add new block</button>

      <h2>Add tag information</h2>
      <ul class="tags">
        <li class="tag plus" *ngFor="let item of tags" (click)="addTags($event)">
          {{item}}
        </li>
      </ul>
      <ul class="activeTags">
        <li class="tag active" *ngFor="let tag of tagsForForm">{{tag}}</li>
      </ul>

    </div>
    <div class="post-footer">
      <button class="button-preview" [disabled]="myForm.form.invalid">Preview</button>
      <button type="submit" (click)="onSubmit(myForm, imageInput)" class="button-publish" [disabled]="myForm.form.invalid">Publish</button>
    </div>
  </form>

</main>
